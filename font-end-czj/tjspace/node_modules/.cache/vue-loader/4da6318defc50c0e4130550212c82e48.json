{"remainingRequest":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/src/components/userInfo/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/src/components/userInfo/login.vue","mtime":1599443563085},{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":499162500000},{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNQd2Q6IHRydWUsCiAgICAgIHJlbWVtYmVyOiBmYWxzZSwKICAgICAgYWNjb3VudDogewogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCJ1c2VySW5mbyIsIFsiaXNMb2FkaW5nIiwgInRva2VuIiwgInVzZXJJbmZvIl0pLAogICAgaXNEaXNhYmxlZCgpIHsKICAgICAgaWYgKHRoaXMuYWNjb3VudC5lbWFpbCAmJiB0aGlzLmFjY291bnQucGFzc3dvcmQpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGhhbmRsZUxvZ2luKCkgewogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgidXNlckluZm8vbG9naW5Vc2VyIiwgdGhpcy5hY2NvdW50KTsKCiAgICAgIGlmICh0aGlzLnRva2VuKSB7CiAgICAgICAgLy8g5oiQ5Yqf6I635Y+WdG9rZW4g6KGo56S65oiQ5Yqf55m75b2VCiAgICAgICAgLy8gY29uc29sZS5sb2coImdldCB1c2VyIHRva2VuIikKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnVzZXJJbmZvKQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJIb21lcGFnZSIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJbmZvLnVzZXJpZCwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/components/userInfo","sourcesContent":["<template>\n  <div class=\"row justify-center\">\n    <q-card class=\"col-md-4 col-xs-6\">\n      <q-card-section>\n        <div class=\"title\">\n          <h5>欢迎使用</h5>\n          <h5 class=\"title-name\">TJSPACE· 同济大学社群</h5>\n        </div>\n        <q-form class=\"q-gutter-md\">\n          <q-input\n            class=\"email\"\n            clearable\n            clear-icon=\"close\"\n            v-model=\"account.email\"\n            label=\"邮箱:\"\n            suffix=\"@tongji.edu.cn\"\n            hint=\"请输入注册时使用的同济邮箱\"\n          />\n\n          <q-input\n            v-model=\"account.password\"\n            label=\"密码:\"\n            :type=\"isPwd ? 'password' : 'text'\"\n          >\n            <template v-slot:append>\n              <q-icon\n                :name=\"isPwd ? 'visibility_off' : 'visibility'\"\n                class=\"cursor-pointer\"\n                @click=\"isPwd = !isPwd\"\n              />\n            </template>\n          </q-input>\n\n          <q-toggle v-model=\"remember\" label=\"记住邮箱\" />\n\n          <div>\n            <q-btn\n              :loading=\"isLoading\"\n              :disable=\"isDisabled\"\n              class=\"queren-btn\"\n              label=\"登录\"\n              color=\"primary\"\n              @click=\"handleLogin()\"\n            />\n          </div>\n          <q-btn-group flat spread>\n            <q-btn flat color=\"primary\" label=\"忘记密码\" />\n            <q-btn\n              flat\n              color=\"primary\"\n              :to=\"{ name: 'register' }\"\n              label=\"现在注册\"\n            />\n          </q-btn-group>\n        </q-form>\n      </q-card-section>\n    </q-card>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nexport default {\n  data() {\n    return {\n      isPwd: true,\n      remember: false,\n      account: {\n        email: \"\",\n        password: \"\",\n      },\n    };\n  },\n  computed: {\n    ...mapState(\"userInfo\", [\"isLoading\", \"token\", \"userInfo\"]),\n    isDisabled() {\n      if (this.account.email && this.account.password) return false;\n      return true;\n    },\n  },\n\n  methods: {\n    async handleLogin() {\n      await this.$store.dispatch(\"userInfo/loginUser\", this.account);\n\n      if (this.token) {\n        // 成功获取token 表示成功登录\n        // console.log(\"get user token\")\n        console.log(this.userInfo)\n        this.$router.push({\n          name: \"Homepage\",\n          params: {\n            userId: this.userInfo.userid,\n          },\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.title {\n  text-align: center;\n}\n\n.title-name {\n  font-weight: bold;\n  font-size: 27px;\n  line-height: -2;\n}\n\n.queren-btn {\n  width: 100%;\n}\n</style>\n"]}]}