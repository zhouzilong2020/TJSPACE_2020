{"remainingRequest":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end/tjspace/node_modules/babel-loader/lib/index.js!/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end/tjspace/node_modules/eslint-loader/index.js??ref--13-0!/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end/tjspace/src/store/userInfo.js","dependencies":[{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end/tjspace/src/store/userInfo.js","mtime":1597978103340},{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end/tjspace/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end/tjspace/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end/tjspace/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2NoZW56aWppZS9Eb3dubG9hZHMvXHU2NTcwXHU2MzZFXHU1RTkzXHU4QkZFXHU3QTBCXHU4QkJFXHU4QkExL1RKU1BBQ0UvVEpTUEFDRV8yMDIwL2ZvbnQtZW5kL3Rqc3BhY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLyDnmbvlvZXnlKjmiLfnmoTku5PlupPmlbDmja4KaW1wb3J0IHsgbG9naW5Vc2VyIGFzIF9sb2dpblVzZXIgfSBmcm9tICIuLi9zZXJ2aWNlcy9sb2dpblVzZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgLy8g5ZOI5ZOIIOaYr25hbWVzcGFjZWTvvIEKICBuYW1lc3BhY2VkOiB0cnVlLAogIC8v5byA5ZCv5ZG95ZCN56m66Ze0LCDpmLLmraLph43lkI3lsZ7mgKfvvIzlk4jlk4jjgIIKICAvLyBzdGF0ZeWwseaYr+S7k+W6k+eahOWFt+S9k+WtmOWCqOeahOaVsOaNru+8jCDlk4jlk4jjgIIKICBzdGF0ZTogewogICAgLy8g5b2T5YmN5q2j5Zyo55m75b2V55qE55So5oi3CiAgICB1c2VySW5mbzogbnVsbCwKICAgIHRva2VuOiAnJywKICAgIGlzTG9hZGluZzogZmFsc2UKICB9LAogIC8vIOe7hOS7tumHjOmdouS4jeiDveaUueS7k+W6k+aVsOaNru+8jOWcqHZ1ZXjkuK3lv4Xpobvmj5DkuqRtdXRhdGlvbu+8muaUueWPmAogIC8vIOmcgOimgWNvbW1pdOS4gOS4qm11dGF0aW9u77yM5pS+5ZyobXV0YXRpb25z5Lit6YWN572uCiAgbXV0YXRpb25zOiB7CiAgICAvL+mFjee9ruaVsOaNrueahOWPmOW8guaWueW8jwogICAgLy/ojrflj5bvvIzplIDmr4HvvIznrYnmlbDmja7lj5jljJYKICAgIC8vIHN0YXRlIOWOn+adpeeahOaVsOaNrgogICAgLy8gcGF5bG9hZCDotJ/ojbfvvIzlj6/ku6XkvKDpgJLku7vkvZXkuJzopb8KICAgIHNldFRva2VuOiBmdW5jdGlvbiBzZXRUb2tlbihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS50b2tlbiA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0SXNMb2FkaW5nOiBmdW5jdGlvbiBzZXRJc0xvYWRpbmcoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuaXNMb2FkaW5nID0gcGF5bG9hZDsKICAgIH0KICB9LAogIC8vIOS4jeiDveWHuueOsOWJr+S9nOeUqOaTjeS9nO+8jOWNs+WPquiDveabtOaUueS7k+W6k+mHjOeahOaVsOaNrgogIC8vIGVn77yaIOaUueWKqOS9v+eUqOWklumDqOaVsOaNru+8jCBhamF477yMIGxvY2Fsc3RvcmFnZe+8jCDlhbbku5blvILmraXooYzkuLoKICAvLyDmiYDku6Xlh7rnjrDkuoZhY3Rpb27vvIHvvIHphY3nva7lkoxtdXRhdGlvbnPlt67kuI3lpJoKICBhY3Rpb25zOiB7CiAgICAvLyDlvILmraXlh73mlbAKICAgIC8vIGNvbnRleHQg55u45b2T5LqO5LiA5Liq5LuT5bqT5a+56LGhCiAgICAvLyBwYXlsb2FkIOaYr+S4gOS4qui0n+iNtwogICAgbG9naW5Vc2VyOiBmdW5jdGlvbiBsb2dpblVzZXIoY29udGV4dCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBkYXRhLCB0b2tlbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvL2lzbG9hZGluZ+S4unRyZXUKICAgICAgICAgICAgICAgIC8vIOS4jeiDveWRouebtOaOpeaUueWKqOaVsOaNru+8jOS7jeeEtumcgOimgeaPkOS6pGNvbW1pdOS4gOS4qm11dGF0aW9uCiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgic2V0SXNMb2FkaW5nIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfbG9naW5Vc2VyKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgIHRva2VuID0gIkJlYXJlciAiICsgZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgic2V0VG9rZW4iLCB0b2tlbik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoInNldElzTG9hZGluZyIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end/tjspace/src/store/userInfo.js"],"names":["loginUser","namespaced","state","userInfo","token","isLoading","mutations","setToken","payload","setIsLoading","actions","context","commit","data","console","log","status"],"mappings":";;AAAA;AACA,SAAQA,SAAS,IAATA,UAAR,QAAwB,uBAAxB;AAEA,eAAc;AACV;AACAC,EAAAA,UAAU,EAAE,IAFF;AAEQ;AAClB;AACAC,EAAAA,KAAK,EAAE;AACH;AACAC,IAAAA,QAAQ,EAAE,IAFP;AAGHC,IAAAA,KAAK,EAAE,EAHJ;AAIHC,IAAAA,SAAS,EAAE;AAJR,GAJG;AAWV;AACA;AACAC,EAAAA,SAAS,EAAE;AACP;AACA;AACA;AACA;AACAC,IAAAA,QALO,oBAKEL,KALF,EAKSM,OALT,EAKkB;AACrBN,MAAAA,KAAK,CAACE,KAAN,GAAcI,OAAd;AACH,KAPM;AAQPC,IAAAA,YARO,wBAQMP,KARN,EAQaM,OARb,EAQqB;AACxBN,MAAAA,KAAK,CAACG,SAAN,GAAkBG,OAAlB;AACH;AAVM,GAbD;AAyBV;AACA;AACA;AACAE,EAAAA,OAAO,EAAE;AACL;AACA;AACA;AACMV,IAAAA,SAJD,qBAIWW,OAJX,EAImB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACpB;AACA;AACAA,gBAAAA,OAAO,CAACC,MAAR,CAAe,cAAf,EAA+B,IAA/B;AAHoB;AAAA,uBAKHZ,UAAS,EALN;;AAAA;AAKhBa,gBAAAA,IALgB;AAMpBC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AACA,oBAAGA,IAAI,CAACG,MAAR,EAAe;AACPZ,kBAAAA,KADO,GACC,YAAYS,IAAI,CAACA,IADlB;AAEXF,kBAAAA,OAAO,CAACC,MAAR,CAAe,UAAf,EAA2BR,KAA3B;AACH;;AAEDO,gBAAAA,OAAO,CAACC,MAAR,CAAe,cAAf,EAA+B,KAA/B;;AAZoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAavB;AAjBI;AA5BC,CAAd","sourcesContent":["// 登录用户的仓库数据\nimport {loginUser} from \"../services/loginUser\"\n\nexport default{\n    // 哈哈 是namespaced！\n    namespaced: true, //开启命名空间, 防止重名属性，哈哈。\n    // state就是仓库的具体存储的数据， 哈哈。\n    state: {\n        // 当前正在登录的用户\n        userInfo: null,\n        token: '',\n        isLoading: false,\n    },\n\n    // 组件里面不能改仓库数据，在vuex中必须提交mutation：改变\n    // 需要commit一个mutation，放在mutations中配置\n    mutations: {\n        //配置数据的变异方式\n        //获取，销毁，等数据变化\n        // state 原来的数据\n        // payload 负荷，可以传递任何东西\n        setToken(state, payload) {\n            state.token = payload;\n        },\n        setIsLoading(state, payload){\n            state.isLoading = payload;\n        },\n    },\n    // 不能出现副作用操作，即只能更改仓库里的数据\n    // eg： 改动使用外部数据， ajax， localstorage， 其他异步行为\n    // 所以出现了action！！配置和mutations差不多\n    actions: {\n        // 异步函数\n        // context 相当于一个仓库对象\n        // payload 是一个负荷\n        async loginUser(context){\n            //isloading为treu\n            // 不能呢直接改动数据，仍然需要提交commit一个mutation\n            context.commit(\"setIsLoading\", true);     \n\n            var data = await loginUser();\n            console.log(data);\n            if(data.status){\n                let token = \"Bearer \" + data.data;\n                context.commit(\"setToken\", token);      \n            }\n            \n            context.commit(\"setIsLoading\", false);\n        }\n    },\n}\n"]}]}