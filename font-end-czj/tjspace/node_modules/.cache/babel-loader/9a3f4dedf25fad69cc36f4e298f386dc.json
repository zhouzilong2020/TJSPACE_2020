{"remainingRequest":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/node_modules/babel-loader/lib/index.js!/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/node_modules/eslint-loader/index.js??ref--13-0!/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/src/store/userInfo.js","dependencies":[{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/src/store/userInfo.js","mtime":1599443563087},{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2NoZW56aWppZS9Eb3dubG9hZHMvXHU2NTcwXHU2MzZFXHU1RTkzXHU4QkZFXHU3QTBCXHU4QkJFXHU4QkExL1RKU1BBQ0UvVEpTUEFDRV8yMDIwL2ZvbnQtZW5kLWN6ai90anNwYWNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgbG9naW5Vc2VyIGFzIF9sb2dpblVzZXIsIGxvZ291dFVzZXIgYXMgX2xvZ291dFVzZXIsIHJlZ2lzdGVyVXNlciBhcyBfcmVnaXN0ZXJVc2VyLCBnZXRVc2VySW5mbyB9IGZyb20gIi4uL3NlcnZpY2VzL3VzZXJTZXJ2aWNlIjsKLyoqCiAqIOeUqOaIt+eZu+W9leeahOaVsOaNruS7k+W6kwogKi8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICB1c2VySW5mbzogbnVsbCwKICAgIHRva2VuOiBudWxsLAogICAgaXNMb2FkaW5nOiBmYWxzZQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICAvKioKICAgICAqIOS/ruaUueS4quS6uuS/oeaBrwogICAgICogQHBhcmFtIHsqfSBzdGF0ZSDmjIflkJHmnKzku5PlupPnmoRzdGF0ZQogICAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgcGF5bG9hZOS7pW9iamVjdOW9ouW8j+S8oOWFpe+8jOWMheaLrG5pY2tuYW1l77yMdXNlcmlk77yMZW1haWznrYkKICAgICAqLwogICAgc2V0VXNlckluZm86IGZ1bmN0aW9uIHNldFVzZXJJbmZvKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnVzZXJJbmZvID0gcGF5bG9hZDsKICAgIH0sCgogICAgLyoqCiAgICAgKiDkv67mlLnmmK/lkKbmraPlnKjliqDovb0KICAgICAqIEBwYXJhbSB7Kn0gc3RhdGUg5oyH5ZCR5pys5LuT5bqT55qEc3RhdGUKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcGF5bG9hZCBwYXlsb2Fk5Lyg5YWldHJ1ZSBvciBmYWxzZQogICAgICovCiAgICBzZXRJc0xvYWRpbmc6IGZ1bmN0aW9uIHNldElzTG9hZGluZyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBwYXlsb2FkOwogICAgfSwKCiAgICAvKioKICAgICAqIOiuvue9rnRva2VuCiAgICAgKiBAcGFyYW0geyp9IHN0YXRlIAogICAgICogQHBhcmFtIHsqfSBwYXlsb2FkIAogICAgICovCiAgICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4oc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUudG9rZW4gPSBwYXlsb2FkOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgLyoqCiAgICAgKiDnmbvlvZXnlKjmiLcKICAgICAqIEBwYXJhbSB7Kn0gY29udGV4dCAKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIHBheWxvYWTkvKDlhaVlbWFpbO+8jHBhc3N3b3JkCiAgICAgKi8KICAgIGxvZ2luVXNlcjogZnVuY3Rpb24gbG9naW5Vc2VyKGNvbnRleHQsIHBheWxvYWQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcCwgcmVzcDI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoInNldElzTG9hZGluZyIsIHRydWUpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX2xvZ2luVXNlcihwYXlsb2FkKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwKTsKCiAgICAgICAgICAgICAgICBpZiAoIXJlc3Auc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8g55m75b2V5oiQ5Yqf77yM6K6w5b2V5YW2dG9rZW4KICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRUb2tlbicsICJCZWFyZXIgIiArIHJlc3AuZGF0YTEpOyAvLyDkvb/nlKh0b2tlbuiOt+WPlueUqOaIt+S4quS6uuS/oeaBrwoKICAgICAgICAgICAgICAgIGlmICghcmVzcC5kYXRhMSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRVc2VySW5mbyh7CiAgICAgICAgICAgICAgICAgIHVzZXJJZDogcmVzcC5kYXRhMiwKICAgICAgICAgICAgICAgICAgdG9rZW46ICdCZWFyZXIgJyArIHJlc3AuZGF0YTEKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgcmVzcDIgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgaWYgKHJlc3AyKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJzZXRVc2VySW5mbyIsIHJlc3AyKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJzZXRJc0xvYWRpbmciLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKgogICAgICog6YCA5Ye655m75b2V77yM5bCG5pWw5o2u5LuT5bqT5Lit55qE55So5oi35L+h5oGv572u56m6CiAgICAgKiBAcGFyYW0geyp9IGNvbnRleHQgCiAgICAgKi8KICAgIGxvZ291dFVzZXI6IGZ1bmN0aW9uIGxvZ291dFVzZXIoY29udGV4dCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzcDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImluIHN0b3JlIGxvZ291dFVzZXIiKTsKICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJzZXRJc0xvYWRpbmciLCB0cnVlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfbG9nb3V0VXNlcigpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9rZW4nLCBudWxsKTsKICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3VzZXJJbmZvJywgbnVsbCk7CiAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJzZXRJc0xvYWRpbmciLCBmYWxzZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHJlc3ApOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDms6jlhoznlKjmiLcKICAgICAqIEBwYXJhbSB7Kn0gY29udGV4dCAKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIOS8oOWFpemCrueuse+8jOWvhueggeOAgueUqOaIt+WQje+8jOaYteensAogICAgICovCiAgICByZWdpc3RlclVzZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyVXNlcihjb250ZXh0LCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciByZXNwOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgic2V0SXNMb2FkaW5nIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2lzdGVyVXNlcihwYXlsb2FkKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoInNldElzTG9hZGluZyIsIGZhbHNlKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCByZXNwKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/chenzijie/Downloads/数据库课程设计/TJSPACE/TJSPACE_2020/font-end-czj/tjspace/src/store/userInfo.js"],"names":["loginUser","logoutUser","registerUser","getUserInfo","namespaced","state","userInfo","token","isLoading","mutations","setUserInfo","payload","setIsLoading","setToken","actions","context","commit","resp","console","log","status","data1","userId","data2","resp2"],"mappings":"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","sourcesContent":["import { loginUser, logoutUser, registerUser, getUserInfo } from \"../services/userService\"\n/**\n * 用户登录的数据仓库\n */\nexport default {\n    namespaced: true,\n    state: {\n        userInfo: null,\n        token: null,\n        isLoading: false,\n    },\n    mutations: {\n        /**\n         * 修改个人信息\n         * @param {*} state 指向本仓库的state\n         * @param {Object} payload payload以object形式传入，包括nickname，userid，email等\n         */\n        setUserInfo(state, payload) {\n            state.userInfo = payload;\n        },\n        /**\n         * 修改是否正在加载\n         * @param {*} state 指向本仓库的state\n         * @param {boolean} payload payload传入true or false\n         */\n        setIsLoading(state, payload) {\n            state.isLoading = payload;\n        },\n        /**\n         * 设置token\n         * @param {*} state \n         * @param {*} payload \n         */\n        setToken(state, payload) {\n            state.token = payload;\n        }\n    },\n\n    actions: {\n        /**\n         * 登录用户\n         * @param {*} context \n         * @param {Object} payload payload传入email，password\n         */\n        async loginUser(context, payload) {\n            context.commit(\"setIsLoading\", true);\n            var resp = await loginUser(payload);\n            console.log(resp);\n            if (resp.status) {\n                // 登录成功，记录其token\n                context.commit('setToken', \"Bearer \" + resp.data1)\n                // 使用token获取用户个人信息\n                if (resp.data1) {\n                    var resp2 = await getUserInfo({\n                        userId: resp.data2,\n                        token: 'Bearer ' + resp.data1\n                    })\n                }\n                if(resp2){\n                    context.commit(\"setUserInfo\", resp2)\n                }\n            }\n            context.commit(\"setIsLoading\", false);\n        },\n        /**\n         * 退出登录，将数据仓库中的用户信息置空\n         * @param {*} context \n         */\n        async logoutUser(context) {\n            console.log(\"in store logoutUser\")\n            context.commit(\"setIsLoading\", true);\n            var resp = await logoutUser()\n            console.log(resp)\n            if (resp) {\n                context.commit('setToken', null)\n                context.commit('userInfo', null)\n                context.commit(\"setIsLoading\", false);\n            }\n            return resp\n        },\n        /**\n         * 注册用户\n         * @param {*} context \n         * @param {Object} payload 传入邮箱，密码。用户名，昵称\n         */\n        async registerUser(context, payload) {\n            context.commit(\"setIsLoading\", true);\n            var resp = await registerUser(payload)\n            context.commit(\"setIsLoading\", false);\n            return resp\n        }\n    },\n}\n"]}]}